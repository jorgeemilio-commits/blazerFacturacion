@page "/"
@rendermode InteractiveServer
@using blazerFacturacion.Components.Data
@inject ServicioReporte ServicioReporte
   
<PageTitle>Inicio - Dashboard - </PageTitle>

<div class="container mt-4">
    <div class="text-center mb-5">
        <h1 class="display-5 fw-bold text-primary">📊 Resumen del Negocio</h1>
        <p class="text-muted">Indicadores clave de rendimiento en tiempo real.</p>
    </div>

    <div class="row g-3 mb-5">
        <div class="col-md-4">
            <div class="card text-white bg-success h-100 shadow-sm">
                <div class="card-header">💰 Ingresos Totales</div>
                <div class="card-body text-center">
                    <h2 class="card-title">@_dashboard.TotalIngresos.ToString("C")</h2>
                    <p class="card-text opacity-75">Ventas históricas</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-2">
            <div class="card text-white bg-secondary h-100 shadow-sm">
                <div class="card-header">🧾 Facturas</div>
                <div class="card-body text-center">
                    <h2>@_dashboard.TotalFacturas</h2>
                    <p class="card-text small">Emitidas</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card text-dark bg-warning h-100 shadow-sm">
                <div class="card-header fw-bold">🔥 Artículo Estrella</div>
                <div class="card-body d-flex align-items-center justify-content-center">
                    <h3 class="m-0">@_dashboard.ArticuloMasVendido</h3>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card text-white bg-primary h-100 shadow-sm">
                <div class="card-header">🏆 Mejor Cliente</div>
                <div class="card-body text-center">
                    <h3 class="card-title">@_dashboard.ClienteEstrella</h3>
                    <p class="card-text opacity-75">Mayor volumen de compra</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card text-white bg-info h-100 shadow-sm">
                <div class="card-header text-dark">📅 Mes Récord</div>
                <div class="card-body text-center">
                    <h3 class="card-title text-dark">@_dashboard.MesMasVentas</h3>
                    <p class="card-text text-dark opacity-75">Mes con mayores ingresos</p>
                </div>
            </div>
        </div>
    </div>

    <hr class="my-5" />

    <h4 class="mb-3 text-muted">Acciones Rápidas</h4>
    <div class="row justify-content-center g-4">
        <div class="col-md-4">
            <div class="card h-100 shadow hover-card border-success">
                <div class="card-body text-center">
                    <div class="display-4 mb-2">➕</div>
                    <h5>Nueva Factura</h5>
                    <a href="factura" class="btn btn-outline-success stretched-link">Ir a Crear</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100 shadow hover-card border-warning">
                <div class="card-body text-center">
                    <div class="display-4 mb-2">📦</div>
                    <h5>Catálogo</h5>
                    <a href="catalogo" class="btn btn-outline-warning stretched-link">Gestionar</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100 shadow hover-card border-info">
                <div class="card-body text-center">
                    <div class="display-4 mb-2">📈</div>
                    <h5>Reportes</h5>
                    <a href="reportes" class="btn btn-outline-info stretched-link">Ver Detalles</a>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private DashboardInfo _dashboard = new DashboardInfo();

    protected override async Task OnInitializedAsync()
    {
        // Cargamos los datos del servicio al entrar
        _dashboard = await ServicioReporte.ObtenerDashboardAsync();
    }
}